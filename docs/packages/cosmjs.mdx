---
title: '@sei-js/cosmjs'
description: 'CosmJS integration for Cosmos ecosystem development on Sei'
---

## Overview

The `@sei-js/cosmjs` package provides comprehensive utilities for wallet connection, transaction signing, RPC querying, and more for Cosmos ecosystem development on Sei. It's built on top of CosmJS and provides Sei-specific enhancements.

<CardGroup cols={2}>
  <Card
    title="Wallet Management"
    icon="wallet"
  >
    Connect to wallet extensions or generate/restore wallets from seed phrases
  </Card>
  <Card
    title="Transaction Signing"
    icon="signature"
  >
    Sign and broadcast transactions with full type safety
  </Card>
  <Card
    title="RPC Querying"
    icon="magnifying-glass"
  >
    Query blockchain state and smart contracts
  </Card>
  <Card
    title="Utility Functions"
    icon="wrench"
  >
    Address validation, hashing, serialization, and more
  </Card>
</CardGroup>

## Installation

<CodeGroup>

```bash npm
npm install @sei-js/cosmjs
```

```bash yarn
yarn add @sei-js/cosmjs
```

```bash pnpm
pnpm add @sei-js/cosmjs
```

</CodeGroup>

## Quick Start

### Wallet Connection

<CodeGroup>

```typescript Generate Wallet
import { getHdPath, generateWallet, restoreWallet } from "@sei-js/cosmjs";

// Generate HD paths
const cosmosHdPath = getHdPath(0, 118); // Sei wallets (account index 0)
const evmHdPath = getHdPath(0, 60); // EVM wallets (account index 0)

// Generate new wallet (24 word mnemonic)
const generatedWallet = await generateWallet(24, cosmosHdPath);
console.log('Generated mnemonic:', generatedWallet.mnemonic);

// Restore wallet from seed phrase
const restoredWallet = await restoreWallet(SEED_PHRASE, evmHdPath);
console.log('Restored wallet:', restoredWallet.address);
```

```typescript Signing Client
import { getSigningCosmWasmClient } from '@sei-js/cosmjs';

const client = await getSigningCosmWasmClient({
  rpcEndpoint: 'https://rpc.sei.io',
  signer: wallet
});

// Query balance
const balance = await client.getBalance(address, 'usei');
console.log('Balance:', balance);
```

</CodeGroup>

### Basic Transactions

<CodeGroup>

```typescript Send Tokens
import { calculateFee } from '@cosmjs/stargate';

const fee = calculateFee(200000, '0.1usei');

const result = await client.sendTokens(
  senderAddress,
  recipientAddress,
  [{ denom: 'usei', amount: '1000000' }], // 1 SEI
  fee
);

console.log('Transaction hash:', result.transactionHash);
```

```typescript IBC Transfer
import { MsgTransfer } from '@sei-js/cosmjs';

const msg = {
  typeUrl: '/ibc.applications.transfer.v1.MsgTransfer',
  value: MsgTransfer.fromPartial({
    sourcePort: 'transfer',
    sourceChannel: 'channel-0',
    token: { denom: 'usei', amount: '1000000' },
    sender: senderAddress,
    receiver: receiverAddress,
    timeoutTimestamp: BigInt(Date.now() + 600000) * BigInt(1000000), // 10 minutes
  })
};

const result = await client.signAndBroadcast(senderAddress, [msg], fee);
```

</CodeGroup>

## Wallet Integration

### Cosmos Kit Integration

<CodeGroup>

```tsx Provider Setup
import { ChainProvider } from '@cosmos-kit/react';
import { chains, assets } from 'chain-registry';
import { wallets } from '@cosmos-kit/keplr';

function App() {
  return (
    <ChainProvider
      chains={chains}
      assetLists={assets}
      wallets={wallets}
      walletConnectOptions={{
        signClient: {
          projectId: 'your-project-id',
        }
      }}
    >
      <YourApp />
    </ChainProvider>
  );
}
```

```tsx Using Hooks
import { useChain } from '@cosmos-kit/react';

function WalletConnection() {
  const { connect, disconnect, isWalletConnected, address } = useChain('sei');

  return (
    <div>
      {isWalletConnected ? (
        <div>
          <p>Connected: {address}</p>
          <button onClick={disconnect}>Disconnect</button>
        </div>
      ) : (
        <button onClick={connect}>Connect Wallet</button>
      )}
    </div>
  );
}
```

</CodeGroup>

### Manual Wallet Connection

<CodeGroup>

```typescript Keplr/Compass
// Connect to Keplr or Compass wallet
if (window.keplr) {
  await window.keplr.enable('sei-chain');
  const signer = window.keplr.getOfflineSigner('sei-chain');
  
  const client = await getSigningCosmWasmClient({
    rpcEndpoint: 'https://rpc.sei.io',
    signer
  });
}
```

```typescript Leap Wallet
// Connect to Leap wallet
if (window.leap) {
  await window.leap.enable('sei-chain');
  const signer = window.leap.getOfflineSigner('sei-chain');
  
  const client = await getSigningCosmWasmClient({
    rpcEndpoint: 'https://rpc.sei.io',
    signer
  });
}
```

</CodeGroup>

## Smart Contract Interaction

### Querying Contracts

<CodeGroup>

```typescript Query Contract
const queryResult = await client.queryContractSmart(
  contractAddress,
  {
    get_config: {}
  }
);

console.log('Contract config:', queryResult);
```

```typescript Multiple Queries
const queries = [
  { address: contract1, query: { balance: { address: userAddress } } },
  { address: contract2, query: { token_info: {} } }
];

const results = await Promise.all(
  queries.map(({ address, query }) => 
    client.queryContractSmart(address, query)
  )
);
```

</CodeGroup>

### Executing Contracts

<CodeGroup>

```typescript Execute Contract
import { MsgExecuteContract } from '@sei-js/cosmjs';

const executeMsg = {
  typeUrl: '/cosmwasm.wasm.v1.MsgExecuteContract',
  value: MsgExecuteContract.fromPartial({
    sender: senderAddress,
    contract: contractAddress,
    msg: new TextEncoder().encode(JSON.stringify({
      transfer: {
        recipient: recipientAddress,
        amount: '1000000'
      }
    })),
    funds: []
  })
};

const result = await client.signAndBroadcast(senderAddress, [executeMsg], fee);
```

```typescript With Funds
const executeWithFunds = {
  typeUrl: '/cosmwasm.wasm.v1.MsgExecuteContract',
  value: MsgExecuteContract.fromPartial({
    sender: senderAddress,
    contract: contractAddress,
    msg: new TextEncoder().encode(JSON.stringify({
      purchase: {
        item_id: "123"
      }
    })),
    funds: [{ denom: 'usei', amount: '5000000' }] // 5 SEI
  })
};

const result = await client.signAndBroadcast(senderAddress, [executeWithFunds], fee);
```

</CodeGroup>

## Utility Functions

### Address Utilities

<CodeGroup>

```typescript Address Validation
import { isValidSeiCosmosAddress, truncateSeiAddress } from '@sei-js/cosmjs';

// Validate Sei address
const isValid = isValidSeiCosmosAddress('sei1...');
console.log('Valid address:', isValid);

// Truncate address for display
const truncated = truncateSeiAddress('sei1abcdef...', 6, 4);
console.log('Truncated:', truncated); // "sei1ab...def"
```

```typescript Address Conversion
import { 
  compressedPubKeyToAddress, 
  getAddressHashFromPubKey,
  toBech32 
} from '@sei-js/cosmjs';

// Convert public key to address
const address = compressedPubKeyToAddress(publicKey);

// Get address hash from public key
const hash = getAddressHashFromPubKey(publicKey);

// Convert to bech32 format
const bech32Address = toBech32('sei', hash);
```

</CodeGroup>

### Cryptographic Functions

<CodeGroup>

```typescript Hashing
import { sha256 } from '@sei-js/cosmjs';

const hash = sha256(new TextEncoder().encode('hello world'));
console.log('SHA256 hash:', hash);
```

```typescript Signing
import { makeADR36AminoSignDoc, verifyArbitrary } from '@sei-js/cosmjs';

// Create sign doc for arbitrary message
const signDoc = makeADR36AminoSignDoc(
  signerAddress,
  'Please sign this message'
);

// Verify arbitrary signature
const isValid = verifyArbitrary(
  signerAddress,
  'Please sign this message',
  signature
);
```

</CodeGroup>

### Serialization

<CodeGroup>

```typescript Direct Sign Doc
import { serializeDirectSignDoc } from '@sei-js/cosmjs';

const serialized = serializeDirectSignDoc(signDoc);
console.log('Serialized sign doc:', serialized);
```

```typescript Amino Sign Doc
import { serializeAminoSignDoc } from '@sei-js/cosmjs';

const serialized = serializeAminoSignDoc(aminoSignDoc);
console.log('Serialized amino sign doc:', serialized);
```

</CodeGroup>

## Advanced Usage

### Multi-Signature Transactions

<CodeGroup>

```typescript Create MultiSig
import { createMultisigThresholdPubkey } from '@cosmjs/amino';

const multisigPubkey = createMultisigThresholdPubkey(
  [pubkey1, pubkey2, pubkey3], // Public keys
  2 // Threshold (2 of 3 signatures required)
);

const multisigAddress = pubkeyToAddress(multisigPubkey, 'sei');
```

```typescript Sign MultiSig Transaction
import { makeMultisignedTx } from '@cosmjs/stargate';

// Each signer creates their signature
const signature1 = await signer1.signDirect(signerAddress1, signDoc);
const signature2 = await signer2.signDirect(signerAddress2, signDoc);

// Combine signatures
const multisignedTx = makeMultisignedTx(
  multisigPubkey,
  sequence,
  fee,
  bodyBytes,
  new Map([
    [0, signature1.signature],
    [1, signature2.signature]
  ])
);

// Broadcast transaction
const result = await client.broadcastTx(multisignedTx);
```

</CodeGroup>

### Custom Gas Estimation

<CodeGroup>

```typescript Simulate Transaction
const simulation = await client.simulate(senderAddress, [msg], memo);
const gasUsed = Math.ceil(simulation.gasInfo.gasUsed * 1.3); // Add 30% buffer

const fee = calculateFee(gasUsed, '0.1usei');
```

```typescript Dynamic Fee Calculation
import { GasPrice } from '@cosmjs/stargate';

const gasPrice = GasPrice.fromString('0.1usei');
const fee = calculateFee(gasUsed, gasPrice);
```

</CodeGroup>

## Chain Suggestion

Help users add Sei network to their wallets:

<CodeGroup>

```typescript Keplr Chain Suggestion
const seiChainInfo = {
  chainId: 'sei-chain',
  chainName: 'Sei',
  rpc: 'https://rpc.sei.io',
  rest: 'https://api.sei.io',
  bip44: { coinType: 118 },
  bech32Config: {
    bech32PrefixAccAddr: 'sei',
    bech32PrefixAccPub: 'seipub',
    bech32PrefixValAddr: 'seivaloper',
    bech32PrefixValPub: 'seivaloperpub',
    bech32PrefixConsAddr: 'seivalcons',
    bech32PrefixConsPub: 'seivalconspub'
  },
  currencies: [{
    coinDenom: 'SEI',
    coinMinimalDenom: 'usei',
    coinDecimals: 6
  }],
  feeCurrencies: [{
    coinDenom: 'SEI',
    coinMinimalDenom: 'usei',
    coinDecimals: 6,
    gasPriceStep: {
      low: 0.1,
      average: 0.25,
      high: 0.4
    }
  }],
  stakeCurrency: {
    coinDenom: 'SEI',
    coinMinimalDenom: 'usei',
    coinDecimals: 6
  }
};

await window.keplr.experimentalSuggestChain(seiChainInfo);
```

</CodeGroup>

## Error Handling

<AccordionGroup>
  <Accordion title="Transaction Errors">
    ```typescript
    try {
      const result = await client.signAndBroadcast(address, [msg], fee);
      console.log('Success:', result.transactionHash);
    } catch (error) {
      if (error.message.includes('insufficient funds')) {
        console.error('Insufficient balance for transaction');
      } else if (error.message.includes('gas')) {
        console.error('Gas estimation failed, try increasing gas limit');
      } else {
        console.error('Transaction failed:', error.message);
      }
    }
    ```
  </Accordion>

  <Accordion title="Wallet Connection Errors">
    ```typescript
    try {
      await window.keplr.enable('sei-chain');
    } catch (error) {
      if (error.message.includes('Request rejected')) {
        console.error('User rejected wallet connection');
      } else if (error.message.includes('Chain not found')) {
        console.error('Sei chain not added to wallet');
        // Suggest chain addition
      } else {
        console.error('Wallet connection failed:', error.message);
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Performance">
    - Cache client instances to avoid reconnection overhead
    - Use batch queries when fetching multiple pieces of data
    - Implement proper loading states for async operations
    - Use simulation to estimate gas before transactions
  </Accordion>

  <Accordion title="Security">
    - Always validate addresses before transactions
    - Implement transaction confirmation dialogs
    - Use hardware wallets for high-value operations
    - Verify contract addresses and ABIs
  </Accordion>

  <Accordion title="User Experience">
    - Provide clear error messages
    - Show transaction progress and confirmations
    - Implement retry mechanisms for failed transactions
    - Cache wallet connections across sessions
  </Accordion>
</AccordionGroup>

## Examples

<CardGroup cols={2}>
  <Card
    title="Token Transfer"
    icon="arrow-right-arrow-left"
    href="https://github.com/sei-protocol/sei-js/tree/main/examples/cosmjs-token-transfer"
  >
    Send tokens between Sei addresses
  </Card>
  <Card
    title="Smart Contract Interaction"
    icon="file-contract"
    href="https://github.com/sei-protocol/sei-js/tree/main/examples/cosmjs-smart-contracts"
  >
    Query and execute CosmWasm smart contracts
  </Card>
  <Card
    title="IBC Transfer"
    icon="share-nodes"
    href="https://github.com/sei-protocol/sei-js/tree/main/examples/cosmjs-ibc"
  >
    Transfer tokens across IBC-enabled chains
  </Card>
  <Card
    title="Multi-Signature Wallet"
    icon="users"
    href="https://github.com/sei-protocol/sei-js/tree/main/examples/cosmjs-multisig"
  >
    Create and manage multi-signature wallets
  </Card>
</CardGroup>

## API Reference

For complete API documentation, see the [TypeDoc reference](https://sei-protocol.github.io/sei-js/modules/cosmjs.html).
